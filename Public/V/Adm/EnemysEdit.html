<!--
/**
 *         ▂▃╬▄▄▃▂▁▁
 *  ●●●█〓██████████████▇▇▇▅▅▅▅▅▅▅▅▇▅▅          BUG
 *  ▄▅████☆RED █ WOLF☆██▄▄▃▂
 *  ████████████████████████████
 *  ◥⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙▲⊙◤
 *
 * 后台物品编辑
 * @author 路漫漫
 * @link ahmerry@qq.com
 * @version
 * v2017/08/06 初版
 */
-->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="废土战记">
    <meta name="author" content="路漫漫">
    <title>废土战记</title>
    <link rel="shortcut icon" href="./../../favicon.ico" type="image/x-icon" />
    <script src="http://cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="http://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="./Lib.js"></script>
</head>
<body>
<div class="container col-xs-10 col-sm-10 col-md-10 col-lg-10">
    <div class="starter-template">
        <h1>废土战记：游戏敌人编辑器</h1>
        <form name="save_form" method="post" action="/Enemy/edit" id="save_form" target="_blank" >
            <ul class="list-group">
                <li class="list-group-item">名称 : <input type="text" name="name"></li>
                <li class="list-group-item">战斗图 : <input type="text" name="fightPic"><img id="fightPic" src=""></li>
                <li class="list-group-item">分割row : <input type="text" name="row"></li>
                <li class="list-group-item">分割col : <input type="text" name="col"></li>
                <li class="list-group-item">描述 : <input type="text" name="description"></li>
                <li class="list-group-item">携带金钱 : <input type="text" name="price"></li>
                <li class="list-group-item">掉落物品 : <input type="text" name="item"></li>
                <li class="list-group-item">BOSS? ：
                        <select id="isBoss" name="isBoss">
                            <option value="1">是</option>
                            <option value="0">否</option>
                        </select>
                </li>
                <li class="list-group-item">技能 : <input type="text" name="skill"></li>
                <li class="list-group-item">是否为战车？ ：
                        <select id="inTank" name="inTank">
                            <option value="1">允许</option>
                            <option value="0">不允许</option>
                        </select>
                </li>
                <a href='#' id="sub">提交</a>
            </ul>
        </form>
    </div>

</div><!-- /.container -->
</body>

<script>
    let id = location.href.split('=')[1];
    if(id){
        console.log('id',id);
        $('#save_form').append('<input type="hidden" name="id" value="'+id+'">');
        $.getJSON(API+'Enemy/index?id='+id+'&callback=?',{},function (e) {
            console.log(e);
             $('input[name="name"]').val(e.name);
             $('input[name="fightPic"]').val(e.fightPic);
             $('input[name="row"]').val(e.row);
             $('input[name="col"]').val(e.col);
             $('input[name="description"]').val(e.description);
             $('input[name="price"]').val(e.price);
             $('input[name="item"]').val(e.item);
             $('select[name="isBoss"]').val(e.isBoss);
             $('input[name="skill"]').val(e.skill);
             $('select[name="inTank"]').val(e.inTank);         
        });
    }

    $('#sub').click(function () {
        document.save_form.submit();
    });



</script>
</html>